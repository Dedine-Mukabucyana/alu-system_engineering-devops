cat > 1-install_nginx_web_server << 'EOF'
#!/usr/bin/env bash
# Install nginx and configure to serve Holberton School page

apt-get update -y
apt-get install nginx -y

# Stop nginx
service nginx stop

# Remove ALL nginx site configurations
rm -rf /etc/nginx/sites-available/*
rm -rf /etc/nginx/sites-enabled/*

# Create content directory and file
mkdir -p /var/www/html
echo "Holberton School for the win!" > /var/www/html/index.html

# Create absolute minimal nginx config
cat > /etc/nginx/nginx.conf << 'CONF'
events {}
http {
    server {
        listen 80;
        root /var/www/html;
        index index.html;
        location / {
            try_files $uri $uri/ =404;
        }
    }
}
CONF

# Start nginx
service nginx start
EOF
